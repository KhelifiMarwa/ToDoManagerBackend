<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ToDoManagerMobile.Views.TasksPage"
                    BackgroundColor="#F5F5F5">
    <VerticalStackLayout Padding="20">
        <Label Text="ðŸ“ My Tasks" FontSize="24"/>
        <Button Text="âž• Add New Task"
                BackgroundColor="#2196F3"
                TextColor="White"
                CornerRadius="10"
                FontAttributes="Bold"
                Margin="0,10,0,10"
                Clicked="OnAddTaskClicked" />
        <CollectionView x:Name="TasksCollection"
              SelectionChanged="OnTaskSelected"
SelectionMode="Single"      ItemsLayout="VerticalList"
                    Margin="5">

        <CollectionView.ItemTemplate>
            <DataTemplate>
                <Frame CornerRadius="15"
                       Padding="5"
                       Margin="5"
                       BackgroundColor="White"
                       HasShadow="True">

                    <Grid ColumnDefinitions="40,*,auto"
                          RowDefinitions="Auto,Auto,Auto"
                          ColumnSpacing="5">
                            <HorizontalStackLayout  Padding="0" Grid.Column="2"  Grid.RowSpan="3">
                         
                                    <ImageButton 
             Source="delete.png"
             WidthRequest="12"
             HeightRequest="12"
             BackgroundColor="Transparent"
             CommandParameter="{Binding Id}"
             Clicked="OnDeleteClicked"/>
                            <ImageButton Source="edit.png"
             WidthRequest="12"
             HeightRequest="12" 
             BackgroundColor="Transparent"
             CommandParameter="{Binding Id}"
             Clicked="OnEditClicked"/>
                            </HorizontalStackLayout>
                            <!--<Image Grid.RowSpan="3"
                               Source="{Binding IsCompleted, Converter={StaticResource BoolToImageConverter}}"
                               WidthRequest="24"
                               HeightRequest="24"
                               VerticalOptions="Center"
                               HorizontalOptions="Center"/>-->
                            <Label Text="{Binding IsCompleted, Converter={StaticResource BoolToImageConverter}}"
       FontSize="24" Grid.RowSpan="3"
       VerticalOptions="Center"
       HorizontalOptions="Center"/>


                            <Label Grid.Column="1"
                               Text="{Binding Title}"
                               FontAttributes="Bold"
                               FontSize="18"
                               TextColor="#212121"/>

                        <!--<ImageButton Grid.Column="2"
                                     Source="edit.png"
                                     WidthRequest="20"
                                     HeightRequest="20"
                                     BackgroundColor="Transparent"
                                     CommandParameter="{Binding Id}"/>-->

                    
                        <Label Grid.Row="1" Grid.Column="1"
                               Text="{Binding Description}"
                               FontSize="14"
                               TextColor="#757575"
                               LineBreakMode="WordWrap"/>

                     
                        <Label Grid.Row="2" Grid.Column="1"
                               Text="{Binding DueDate, StringFormat='ðŸ“… {0:dd/MM/yyyy}'}"
                               FontSize="12"
                               TextColor="#2196F3"
                               VerticalOptions="End"/>
                    </Grid>
                </Frame>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
    
  
    </VerticalStackLayout>
</ContentPage>